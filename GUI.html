<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forecast Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        .console {
            font-family: 'Courier New', monospace;
            background-color: #1e293b;
            color: #f8fafc;
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .section-divider {
            border-top: 2px dashed #cbd5e1;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">Forecast Planner</h1>
            
            <div class="flex flex-col md:flex-row gap-4 mb-4">
                <button id="openFileBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                    <i class="fas fa-folder-open"></i> Abrir Archivo
                </button>
                <button id="viewFileBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                    <i class="fas fa-eye"></i> Ver Archivo
                </button>
            </div>
            
            <!-- Console -->
            <div class="console rounded-lg p-4 mb-4 h-32 overflow-y-auto" id="console">
                > Sistema inicializado. Listo para cargar archivo...
            </div>
        </div>
        
        <!-- Main Sections -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Data Cleaning Section -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                        <i class="fas fa-broom text-blue-500"></i> Limpieza de Datos
                    </h2>
                    <div class="w-16 h-1 bg-blue-500 rounded-full"></div>
                </div>
                
                <div class="space-y-4">
                    <button id="startCleaningBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors">
                        <i class="fas fa-play"></i> Empezar
                    </button>
                    
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">Periodos Estacionales</label>
                        <input type="number" id="seasonalPeriods" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="12">
                    </div>
                    
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">Desviaciones estándar</label>
                        <input type="number" id="standardDeviations" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="2">
                    </div>
                    
                    <div class="pt-2">
                        <label class="text-sm font-medium text-gray-700">Progreso:</label>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mt-1">
                            <div id="cleaningProgress" class="bg-blue-600 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Hyperparameters Section -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                        <i class="fas fa-sliders-h text-purple-500"></i> Cálculo de Hiperparámetros           
                    </h2>
                    <div class="w-16 h-1 bg-purple-500 rounded-full"></div>
                </div>
                
                <div class="space-y-4">
                    <button id="generateParamsBtn" class="w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors">
                        <i class="fas fa-cog"></i> Generar
                    </button>
                    
                    <div class="flex items-center">
                        <input id="useMethod2" type="checkbox" class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded">
                        <label for="useMethod2" class="ml-2 block text-sm text-gray-700">Usar Método 2</label>
                    </div>
                    
                    <div class="pt-2">
                        <label class="text-sm font-medium text-gray-700">Progreso:</label>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mt-1">
                            <div id="paramsProgress" class="bg-purple-600 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Demand Forecast Section -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                        <i class="fas fa-chart-line text-green-500"></i> Pronóstico de Demanda
                    </h2>
                    <div class="w-16 h-1 bg-green-500 rounded-full"></div>
                </div>
                
                <div class="space-y-4">
                    <button id="startForecastBtn" class="w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors">
                        <i class="fas fa-rocket"></i> Iniciar
                    </button>
                    
                    <div class="pt-2">
                        <label class="text-sm font-medium text-gray-700">Progreso:</label>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mt-1">
                            <div id="forecastProgress" class="bg-green-600 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Save File Button -->
        <div class="mt-6 flex justify-center">
            <button id="saveFileBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg text-lg font-bold flex items-center gap-2 transition-colors shadow-lg">
                <i class="fas fa-save"></i> Guardar Archivo
            </button>
        </div>
    </div>

    <script>
        // Function to simulate module imports
        function importModule(moduleName) {
            console.log(`Importing module: ${moduleName}.py`);
            // In a real implementation, this would use ES6 modules or dynamic imports
            return {
                execute: () => console.log(`Executing ${moduleName} function`)
            };
        }

        // Import modules (simulated)
        const dataCleaningModule = importModule('data_cleaning');
        const hyperparamsModule = importModule('hyperparameters');
        const forecastModule = importModule('forecast');
        const fileHandlerModule = importModule('file_handler');

        // DOM elements
        const consoleElement = document.getElementById('console');
        const cleaningProgress = document.getElementById('cleaningProgress');
        const paramsProgress = document.getElementById('paramsProgress');
        const forecastProgress = document.getElementById('forecastProgress');

        // Button event listeners
        document.getElementById('openFileBtn').addEventListener('click', () => {
            logToConsole("> Abriendo archivo...");
            // Simulate file opening
            setTimeout(() => {
                logToConsole("> Archivo cargado correctamente.");
                fileHandlerModule.execute();
            }, 1000);
        });

        document.getElementById('viewFileBtn').addEventListener('click', () => {
            logToConsole("> Mostrando contenido del archivo...");
            fileHandlerModule.execute();
        });

        document.getElementById('startCleaningBtn').addEventListener('click', () => {
            const periods = document.getElementById('seasonalPeriods').value;
            const deviations = document.getElementById('standardDeviations').value;
            
            logToConsole(`> Iniciando limpieza con ${periods} periodos y ${deviations} desviaciones...`);
            
            // Simulate progress
            simulateProgress(cleaningProgress, () => {
                logToConsole("> Limpieza de datos completada.");
                dataCleaningModule.execute();
            });
        });

        document.getElementById('generateParamsBtn').addEventListener('click', () => {
            const useMethod2 = document.getElementById('useMethod2').checked;
            
            logToConsole(`> Generando hiperparámetros ${useMethod2 ? 'con Método 2' : 'con Método 1'}...`);
            
            // Simulate progress
            simulateProgress(paramsProgress, () => {
                logToConsole("> Hiperparámetros generados correctamente.");
                hyperparamsModule.execute();
            });
        });

        document.getElementById('startForecastBtn').addEventListener('click', () => {
            logToConsole("> Iniciando pronóstico de demanda...");
            
            // Simulate progress
            simulateProgress(forecastProgress, () => {
                logToConsole("> Pronóstico completado con éxito.");
                forecastModule.execute();
            });
        });

        document.getElementById('saveFileBtn').addEventListener('click', () => {
            logToConsole("> Guardando archivo con resultados...");
            fileHandlerModule.execute();
        });

        // Helper functions
        function logToConsole(message) {
            const timestamp = new Date().toLocaleTimeString();
            consoleElement.innerHTML += `<div class="text-green-400">[${timestamp}] ${message}</div>`;
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }

        function simulateProgress(progressElement, callback) {
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    if (callback) callback();
                } else {
                    width += Math.random() * 10 + 5;
                    if (width > 100) width = 100;
                    progressElement.style.width = `${width}%`;
                }
            }, 200);
        }
    </script>
</body>
</html>